#Data Model
在Hbase中数据存于行列表中。这个和关系型数据是一个术语的重复，但不是一个有效的比喻。反而，把Hbase表想成多维图更合意。

**HBase Data Model Terminology** (**HBase数据模型专业术语**)

_**Table**_

由多行组成的HBase表

_**Row**_

HBase中的一个Row由一个row key和一个或多个带有相关值的columns组成。Rows是按row key的字母序列排序的。因为这个原因，row key的设计十分重要。以这种方式存储数据的目的是使相关的rows距离相近。一个常见的row key模式是网页域名。如果row key是域名，那你应该反过来存储它们 (org.apache.www, org.apache.mail, org.apache.jira)，这样所有的Apache域名在表中都在一起，而不会根据子域的第一个字母而分散开。

_**Column**_

HBase中的Comlumn由一个column family 和一个column qualifier组成，二者由：分隔

_**Column family**_

通常出于性能原因，Column families将一套columns和它们的值在物理上定位在一起（colocate），每个column family有一套存储性能，例如它的值是否应缓存到内存，它的数据是如何压缩的，或它的row keys是编码过的。表中的每行都有同样的column family，即使一个已知的row可能没在已知的column family中存储任何东西。

_**Column Qualifier**_

column qualifier是加在column family后面用来为一块给定数据提供索引的。假定column family是content（内容），一个column qualifier 可能是content:html ，或者content:pdf。尽管column family在表创建时就固定下来了，但column qualifier是可变的，而且不同行之间可能差的很多。

_**Cell**_

cell是row、column family、column qualifier、和其中包含值、时间戳的组合，代表来值的版本

_**Timestamp**_

时间戳被记录随着每个值，是某个特定版本值的标识符。默认情况下，时间戳代表数据何时被写入RegionServer，但当你传入数据时，也可以指定一个不同的时间戳

##20. 概念试图
You can read a very understandable explanation of the HBase data model in the blog post Understanding HBase and BigTable by Jim R. Wilson. Another good explanation is available in the PDF Introduction to Basic Schema Design by Amandeep Khurana.

阅读不同观点能帮助我们对HBase 架构设计有一个很深的理解。上面的文章包含来这小结中的观点。

The following example is a slightly modified form of the one on page 2 of the BigTable paper. 有个table叫_webtalbe_，其包含2行（**com.cnn.www** 和 **com.example.www**）、3个comlumn families（**contents**, **anchor**,**people** ）。这个例子中，对一行**com.cnn.www**，作者包含两列（**anchor:cssnsi.com**, **anchor:my.look.ca**），内容包含一列（**contents:html**）。row key**com.cnn.www**包含5个版本的row，而row **keycom.example.www**只有一个版本的key。column qualifier **contents:html**包含已知网页的全部HTML。column family**anchor**的qualifier包含外部页面,可以链接至row中代表的网页，along with the text it used in the anchor of its link。column family people连接这个网页的人。

_**column name**_

> 按照惯例，一个column名字是由comlumn family前缀和一个qualifier组成。例如，列_contents:html_是由column family _contents_ 和 qualifier_html_组成。‘冒号：’从column family qualifier中限定出column family


_**Table 4. Table webtable**_

<table class="table table-border table-striped table-condensed">
  <tr>
    <td> ROW KEY </td>
    <td> Time Stamp </td>
    <td> ColumnFamily<br>contents </td>
    <td> ColumnFamily<br>anchor </td>
    <td> ColumnFamily<br>people </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t9 </td>
    <td> </td>
    <td> anchor:cnnsi.com="CNN" </td>
    <td> </td>
  </tr>
  <tr> 
    <td> "com.cnn.www" </td>
    <td> t8 </td>
    <td> </td>
    <td> anchor:my.look.ca ="CNN.com" </td>
    <td> </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t6 </td>
    <td> contents:html= "<html>..." </td>
    <td> </td>
    <td> </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t5 </td>
    <td> contents:html= "<html>..." </td>
    <td> </td>
    <td> </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t3 </td>
    <td> contents:html= "<html>..." </td>
    <td> </td>
    <td> </td>
  </tr>
</table>

这个表中的Cells似乎是空的而不占空间，但在Hbase中是实际存在的。这就导致Hbase的“稀疏”。表格式的角度或许是最准确的查看角度，但并不是查看Hbase数据的唯一方式。下面是表示同样信息的多维图。（只是举例用，可能没有那么精准）

    {
       "com.cnn.www": {
         contents: {
           t6: contents:html: "<html>..."
           t5: contents:html: "<html>..."
           t3: contents:html: "<html>..."
         }
         anchor: {
           t9: anchor:cnnsi.com = "CNN"
           t8: anchor:my.look.ca = "CNN.com"
         }
         people: {}
       }
       "com.example.www": {
         contents: {
           t5: contents:html: "<html>..."
         }
         anchor: {}
         people: {
           t5: people:author: "John Doe"
         }
       }
    } 

##21. 物理视图
尽管在概念试图中，表被看成稀疏行的集合，但物理上它们是按column family存储的。一个新的column qualifier可以随时加入到一个一存在的column family中。

_**Table 5. ColumnFamily anchor**_

<table class="table table-border table-striped table-condensed">
  <tr>
    <td> Row key </td>
    <td> Time Stamp </td>
    <td> Column Family anchor </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t9 </td>
    <td> 	anchor:cnnsi.com = "CNN" </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t9 </td>
    <td> 	anchor:my.look.ca = "CNN.com" </td>
  </tr>
  </table>
  
  
_**Table 6. ColumnFamily contents**_

<table class="table table-border table-striped table-condensed">
  <tr>
    <td> Row key </td>
    <td> Time Stamp </td>
    <td> Column Family contents: </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t6 </td>
    <td> 	contents:html = "<html>…​" </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t5 </td>
    <td> 	contents:html = "<html>…​" </td>
  </tr>
  <tr>
    <td> "com.cnn.www" </td>
    <td> t3 </td>
    <td> 	contents:html = "<html>…​" </td>
  </table>

概念视图中的空格没有被存储.因此,当请求列contents:html中时间戳t8时的值是,其返回为无值.同样的,请求时间戳t9时的anchor:my.look.ca值时返回无值。当然，如果没有提供时间戳，特定列的最近的值将被返回。至于多个版本，最近的是指第一个被找到的（时间戳降序排列）。因此，当请求行com.cnn.www中所有的列值时，如果没有指定时间戳，将得到the value of contents:html from timestamp t6, the value of anchor:cnnsi.com from timestamp t9, the value of anchor:my.look.ca from timestamp t8

##22. 命名空间
